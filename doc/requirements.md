# app022: リファレンス・キュレーター - 要件定義書

## 1. アプリ概要
画像をドラッグ&ドロップで集めてタグ付けし、スライドショー表示でムードボードを作成するビジュアルリファレンス管理アプリ。

## 2. 目的・課題

### 解決する課題
- デザインや創作活動でのビジュアルリファレンス（参考画像）の管理が煩雑
- 複数の画像を見比べながら作業するのが難しい
- インスピレーションを得るための画像コレクションの整理が手間

### 目的
- 直感的な操作で画像を収集・整理できるツールの提供
- タグ付けによる分類で目的の画像を素早く検索
- スライドショー機能でムードボード的に全体の雰囲気を確認

## 3. ターゲットユーザー
- デザイナー（グラフィック、UI/UX、プロダクト等）
- イラストレーター・アーティスト
- 創作活動を行う一般ユーザー
- AI画像生成を活用するクリエイター

## 4. 機能要件

### 4.1 必須機能（MVP）
- **画像アップロード**
  - ドラッグ&ドロップでの画像追加
  - 複数画像の一括アップロード対応
  - 対応形式: JPG, PNG, GIF, WebP

- **タグ管理**
  - 画像ごとに複数タグを付与
  - タグの追加・編集・削除
  - タグによる絞り込み検索

- **画像表示**
  - グリッドビュー（サムネイル一覧）
  - 画像クリックで拡大表示
  - 画像の削除機能

- **スライドショー**
  - 全画像または絞り込んだ画像をスライドショー表示
  - 自動送り（間隔調整可能: 3秒/5秒/10秒）
  - 手動送り（矢印キー対応）

### 4.2 拡張機能（優先度：中）
- **コレクション機能**
  - プロジェクトごとに画像グループを作成
  - コレクション間の切り替え

- **メモ機能**
  - 画像ごとにメモを付与

- **エクスポート**
  - コレクションをZIPでダウンロード
  - タグ情報をJSON形式で保存

### 4.3 将来的な拡張（優先度：低）
- 外部URLから画像を取り込み
- カラーパレット自動抽出
- 類似画像の自動グループ化

### 4.4 AI機能（Gemini API）
- **画像分析による自動タグ生成**
  - アップロードした画像をGemini Vision APIで分析
  - 画像の内容・雰囲気・色調・スタイルから適切なタグを自動提案
  - ユーザーが承認・編集可能

- **画像説明文の自動生成**
  - 画像の詳細な説明をテキストで自動生成
  - メモ欄に自動挿入（編集可能）
  - 複数言語対応（日本語/英語）

- **コンセプト提案**
  - 選択した複数画像を分析
  - 全体のムードやテーマを言語化
  - 制作コンセプト・方向性のアイデアを提案

- **類似画像検索の強化**
  - 画像の意味的な類似性を理解
  - 視覚的に異なっても「雰囲気が似ている」画像を発見

## 5. 非機能要件

### 5.1 パフォーマンス
- 画像100枚までスムーズに動作
- サムネイル生成による軽快な表示
- レスポンシブデザイン対応

### 5.2 ユーザビリティ
- 直感的なドラッグ&ドロップUI
- タグ入力のオートコンプリート
- キーボードショートカット対応（スライドショー操作）

### 5.3 データ管理
- ブラウザのLocalStorageまたはIndexedDBで画像データを保存
- データのインポート/エクスポート機能

## 6. 技術制約

### 6.1 環境要件
- モダンブラウザ対応（Chrome, Firefox, Safari, Edge最新版）
- ローカル動作（サーバー不要）
- レスポンシブ対応（デスクトップ優先、タブレット対応）

### 6.2 データ制約
- LocalStorage制限を考慮（画像はBase64エンコード、または画像数制限）
- 大量画像対応のためIndexedDB使用を検討

### 6.3 セキュリティ
- アップロードされた画像はブラウザ内のみで処理（外部送信なし）
- XSS対策（タグ入力のサニタイズ）

### 6.4 AI API仕様
- **使用API**: Google Gemini API
  - モデル: gemini-2.0-flash-exp（テキスト・Vision）
  - エンドポイント: Google AI Studio API

- **APIキー管理**
  - 保存場所: LocalStorage
  - 保存形式: 平文（暗号化なし）
  - キー名: `gemini_api_key`
  - 設定UI: アプリ内設定画面で登録・変更可能

- **起動時チェック**
  - APIキー未登録時は設定画面を表示
  - APIキー検証（簡易的な接続テスト）
  - エラーハンドリング（APIキー無効時の対応）

- **AI機能の利用**
  - AI機能はオプション（APIキーなしでも基本機能は利用可能）
  - API呼び出しエラー時の適切なフィードバック
  - レート制限への対応

## 7. 成功基準

### 7.1 機能面
- ✅ ドラッグ&ドロップで画像追加ができる
- ✅ タグで画像を分類・検索できる
- ✅ スライドショーでムードボード的な閲覧ができる
- ✅ データの永続化（リロード後も保持）

### 7.2 UX面
- ✅ 初見で操作方法が理解できる
- ✅ 画像追加から閲覧まで3クリック以内
- ✅ タグ検索が1秒以内に完了

### 7.3 技術面
- ✅ 画像50枚で動作が快適（フレームレート60fps維持）
- ✅ モバイルでも基本操作が可能
- ✅ エラーハンドリングが適切

## 8. 制約事項・前提条件

### 8.1 制約事項
- 画像はブラウザのストレージ容量に依存（目安: 50〜100枚程度）
- オフライン動作前提（外部API未使用）
- 画像編集機能は含まない（閲覧・整理のみ）

### 8.2 前提条件
- ユーザーは自分のデバイスに画像ファイルを保有
- モダンブラウザの使用（IE非対応）
- JavaScript有効環境

## 9. UI/UX要求

### 9.1 デザイン方向性
- ミニマルで視覚的に美しいデザイン
- 画像が主役のレイアウト
- タグは色分けで視認性向上

### 9.2 主要画面
1. **メイン画面**（グリッドビュー）
   - ヘッダー: アプリ名、アップロードボタン、タグフィルター
   - メインエリア: 画像グリッド（3〜4列）
   - フッター: 表示件数、スライドショー開始ボタン

2. **スライドショー画面**
   - 全画面表示
   - 画像中央配置
   - 下部: 進行状況バー、再生/停止ボタン
   - ESCキーで終了

3. **画像詳細モーダル**
   - 拡大画像表示
   - タグ一覧・編集
   - メモ表示・編集
   - 削除ボタン

## 10. スケジュール・優先度

### Phase 1（MVP）
- 画像アップロード・表示
- タグ管理
- スライドショー基本機能

### Phase 2（拡張）
- コレクション機能
- メモ機能
- エクスポート機能

### Phase 3（改善）
- パフォーマンス最適化
- UI/UXブラッシュアップ
- バグフィックス
